# üíö FakePE - Mock Payment Gateway

> **Beautiful mock payment system for developers.** Test payment integrations, webhooks, and UPI flows without real money. Modern UI with perfect light/dark mode support.

[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/Node.js-18+-green.svg)](https://nodejs.org/)
[![React](https://img.shields.io/badge/React-18-green.svg)](https://reactjs.org/)

---

## üéØ What is FakePE?

FakePE is a **complete mock payment gateway** that simulates real payment flows. Perfect for:
- üß™ Testing payment integrations
- üìö Learning payment gateway architecture
- üé® Demos and presentations
- üöÄ Development without production APIs

---

## ‚ú® Features

### üé® Beautiful UI
- üíö **Modern Green Theme** - Eye-catching design inspired by top payment gateways
- üåì **Perfect Light/Dark Mode** - Seamless switching with proper contrast
- üì± **Fully Responsive** - Mobile-first design
- ‚ö° **Lightning Fast** - Built with Vite for instant HMR

### üí≥ Payment System
- üí∞ **Payment Orders** - Create, track, and manage payments
- üì± **UPI Integration** - Full UPI flow with QR codes
- üëõ **Digital Wallets** - User balance management
- üîÑ **Refunds** - Complete refund workflow
- üìä **Transaction History** - Full payment tracking

### üîß Developer Tools
- üîë **API Keys** - Generate and manage test API keys
- üéØ **Developer Console** - Beautiful dashboard for developers
- üîî **Webhooks** - HMAC-verified webhook delivery
- üìä **Analytics** - Payment statistics and metrics
- üè¢ **Multi-tenant** - Multiple merchant accounts

### üîí Security & Infrastructure
- üîê **JWT Authentication** - Secure API access
- üõ°Ô∏è **CORS Protection** - Configurable origins
- üö¶ **Rate Limiting** - Prevent abuse
- üê≥ **Docker Ready** - One-command infrastructure
- üìä **Monitoring** - Prometheus + Grafana metrics

---

## üöÄ Quick Start

### Prerequisites
```bash
‚úì Node.js 18+
‚úì Docker & Docker Compose
‚úì 10 minutes of your time ‚è∞
```

### 1Ô∏è‚É£ Clone & Setup Infrastructure

```bash
# Clone the repository
git clone https://github.com/Mihir-Rabari/fake-pe.git
cd fake-pe

# Start MongoDB & Redis
docker-compose up -d

# Verify containers are running
docker ps
```

### 2Ô∏è‚É£ Setup Backend

```bash
cd backend
npm install

# Create environment file
cp .env.example .env   # Linux/Mac
# OR
copy .env.example .env  # Windows

# Start backend server
npm run dev
# ‚úì Backend running on http://localhost:4000
```

### 3Ô∏è‚É£ Setup Frontend

```bash
# Open new terminal
cd frontend
npm install

# Start development server
npm run dev
# ‚úì Frontend running on http://localhost:3000
```

### 4Ô∏è‚É£ Access the Application

Open your browser:
- üè† **Homepage**: http://localhost:3000
- üíº **Register**: http://localhost:3000/register (Create merchant account)
- üîë **Login**: http://localhost:3000/login
- üìä **Dashboard**: http://localhost:3000/dashboard
- ‚ù§Ô∏è **API Health**: http://localhost:4000/health

---

## üìÅ Project Structure

```
fake-pe/
‚îÇ
‚îú‚îÄ‚îÄ backend/                    # üîß Node.js API Server
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/        # Route handlers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/             # MongoDB schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/             # API endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/         # Auth, validation, etc.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/              # Helpers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.js            # Server entry point
‚îÇ   ‚îú‚îÄ‚îÄ .env.example            # Environment template
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ frontend/                   # üíº Developer Portal (React)
‚îÇ   ‚îú‚îÄ‚îÄ public/                 # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pages/              # React pages
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomePage.jsx           # üíö Landing page
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginPage.jsx          # Login
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterPage.jsx       # Sign up
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard.jsx          # Main dashboard
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeveloperConsole.jsx   # API keys
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PaymentPage.jsx        # Customer payment
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/         # Reusable components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # Button, Input, Card...
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Logo.jsx               # FakePE logo
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context/            # React Context
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ThemeContext.jsx       # üåì Light/Dark mode
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ App.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main.jsx
‚îÇ   ‚îî‚îÄ‚îÄ package.json
‚îÇ
‚îú‚îÄ‚îÄ monitoring/                 # üìä Observability
‚îÇ   ‚îú‚îÄ‚îÄ prometheus.yml          # Metrics config
‚îÇ   ‚îî‚îÄ‚îÄ grafana/                # Dashboards
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml          # üê≥ Infrastructure
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ LICENSE
‚îî‚îÄ‚îÄ README.md                   # üìñ You are here
```

---

## üîå API Endpoints

### Authentication
```http
POST   /api/v1/auth/register    # Register merchant account
POST   /api/v1/auth/login       # Login
```

### Payments
```http
POST   /api/v1/payments         # Create payment order
GET    /api/v1/payments/:id     # Get payment details
GET    /api/v1/payments         # List payments
POST   /api/v1/payments/:id/refund  # Refund payment
```

### UPI
```http
POST   /api/v1/upi/vpa          # Create UPI VPA
GET    /api/v1/upi/qr/:id       # Generate QR code
POST   /api/v1/upi/initiate     # Start payment
POST   /api/v1/upi/confirm      # Confirm with PIN
GET    /api/v1/upi/history/:userId  # Transaction history
```

### Wallets
```http
GET    /api/v1/wallets/:userId  # Get balance
POST   /api/v1/wallets/topup    # Add money
POST   /api/v1/wallets/transfer # P2P transfer
```

### Merchants
```http
POST   /api/v1/merchants        # Create merchant
GET    /api/v1/merchants/:id    # Get details
GET    /api/v1/merchants/:id/stats  # Get statistics
```

### Projects & API Keys
```http
POST   /api/v1/projects         # Create project
GET    /api/v1/projects         # List projects
POST   /api/v1/projects/:id/keys  # Generate API key
GET    /api/v1/projects/:id/keys  # List API keys
```

### Webhooks
```http
GET    /api/v1/webhooks/attempts  # View delivery logs
POST   /api/v1/admin/replay-webhook/:id  # Retry webhook
```

---

## üéØ Complete Payment Flow

### Step 1: Register as Merchant

1. Go to http://localhost:3000
2. Click "Get Started" or "Sign Up"
3. Fill in merchant details
4. Login to dashboard

### Step 2: Create API Keys

1. Go to **Developer Console**
2. Create a new project
3. Generate API key pair (key_id + key_secret)
4. Copy and save securely

### Step 3: Create Payment (via API)

```bash
curl -X POST http://localhost:4000/api/v1/payments \
  -H "Content-Type: application/json" \
  -u "YOUR_KEY_ID:YOUR_KEY_SECRET" \
  -d '{
    "merchantId": "mer_xxx",
    "amount": 50000,
    "currency": "INR",
    "orderId": "order_001",
    "callbackUrl": "https://your-site.com/webhook"
  }'
```

Response:
```json
{
  "success": true,
  "payment": {
    "paymentId": "pay_xxx",
    "amount": 50000,
    "status": "CREATED",
    "paymentUrl": "http://localhost:3000/pay/pay_xxx",
    "qrData": "data:image/png;base64,..."
  }
}
```

### Step 4: Customer Pays

Customer visits the `paymentUrl` or scans QR code with **FakePE User App** ([separate repository](https://github.com/Mihir-Rabari/fakePE-user-app))

### Step 5: Receive Webhook

```javascript
// Your webhook endpoint
app.post('/webhook', (req, res) => {
  const signature = req.headers['x-fakepe-signature'];
  
  // Verify signature (HMAC SHA256)
  if (verifySignature(req.body, signature, YOUR_SECRET)) {
    const { event, data } = req.body;
    
    if (event === 'payment.completed') {
      console.log('‚úÖ Payment completed:', data.paymentId);
      // Update order, send email, etc.
    }
  }
  
  res.status(200).send('OK');
});
```

---

## üîß Environment Variables

### Backend (`.env`)
```env
NODE_ENV=development
PORT=4000

# Database
MONGO_URI=mongodb://admin:expe_secure_pass_2024@localhost:27017/expe_gateway?authSource=admin

# Redis
REDIS_URL=redis://:expe_redis_pass_2024@localhost:6379

# Security
JWT_SECRET=your_jwt_secret_change_this_in_production
JWT_EXPIRY=24h

# CORS
FRONTEND_URL=http://localhost:3000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Webhooks
WEBHOOK_SECRET=your_webhook_secret_for_signature_verification
```

### Frontend (`.env`)
```env
VITE_API_URL=http://localhost:4000
```

---

## üõ†Ô∏è Tech Stack

### Backend
- **Runtime:** Node.js 18+
- **Framework:** Express.js
- **Database:** MongoDB 7 + Mongoose ODM
- **Cache:** Redis 7 + ioredis
- **Auth:** JWT (jsonwebtoken + bcryptjs)
- **Validation:** Joi
- **Security:** Helmet, CORS, express-rate-limit
- **Monitoring:** Prometheus client
- **Process:** PM2 (production)

### Frontend
- **Framework:** React 18 with Hooks
- **Build:** ‚ö° Vite 4 (Lightning fast HMR)
- **Language:** JavaScript + JSX
- **Styling:** TailwindCSS 3
- **Theme:** üíö **Custom Green Theme** (Light/Dark mode)
- **UI Library:** Custom components
- **Icons:** Lucide React
- **HTTP:** Axios
- **Routing:** React Router v6
- **QR Codes:** qrcode.react
- **State:** React Context API

### Infrastructure
- **Containers:** Docker + Docker Compose
- **Database:** MongoDB 7
- **Cache:** Redis 7
- **Metrics:** Prometheus
- **Dashboards:** Grafana
- **Reverse Proxy:** Nginx (production)

---

## üìä Available Services

| Service | URL | Credentials |
|---------|-----|-------------|
| üè† **Homepage** | http://localhost:3000 | - |
| üíº **Dashboard** | http://localhost:3000/dashboard | Login required |
| üîß **API** | http://localhost:4000 | API keys |
| ‚ù§Ô∏è **Health Check** | http://localhost:4000/health | - |
| üìä **Metrics** | http://localhost:4000/metrics | - |
| üìà **Prometheus** | http://localhost:9090 | - |
| üìä **Grafana** | http://localhost:3001 | admin / expe_grafana_2024 |

---

## üîç Troubleshooting

### Backend won't start

```bash
# Check if containers are running
docker ps

# If not, start them
docker-compose up -d

# Check backend logs
cd backend
npm run dev
```

### Frontend build errors

```bash
# Clear node_modules and reinstall
cd frontend
rm -rf node_modules package-lock.json  # or rmdir /s node_modules on Windows
npm install
```

### Database connection failed

```bash
# Check MongoDB is running
docker ps | grep mongo

# Check environment variables
cat backend/.env  # Linux/Mac
type backend\.env  # Windows

# Verify connection string format
MONGO_URI=mongodb://admin:password@localhost:27017/expe_gateway?authSource=admin
```

### Port already in use

```bash
# Find process using port 4000
lsof -i :4000  # Linux/Mac
netstat -ano | findstr :4000  # Windows

# Kill the process or change PORT in .env
```

---

## üöÄ Production Deployment

### Security Checklist

- ‚úÖ Change **all** default passwords
- ‚úÖ Use strong JWT secret (generate with `openssl rand -base64 32`)
- ‚úÖ Enable HTTPS (use Let's Encrypt)
- ‚úÖ Configure CORS properly
- ‚úÖ Enable rate limiting
- ‚úÖ Use MongoDB authentication
- ‚úÖ Use Redis password
- ‚úÖ Set up API key rotation
- ‚úÖ Monitor webhook delivery
- ‚úÖ Set up error logging (Sentry, etc.)
- ‚úÖ Use PM2 for process management
- ‚úÖ Set up automated backups

### Environment Variables (Production)

```env
NODE_ENV=production
MONGO_URI=mongodb+srv://user:pass@cluster.mongodb.net/db
REDIS_URL=rediss://user:pass@redis-host:6380
JWT_SECRET=<generate-strong-secret>
FRONTEND_URL=https://yourdomain.com
ALLOWED_ORIGINS=https://yourdomain.com
```

---

## üì± Related Projects

### FakePE User App (Separate Repository)
The **UPI Mobile App** for end-users to scan QR codes and make payments.

üîó **Repository:** [github.com/Mihir-Rabari/fakePE-user-app](https://github.com/Mihir-Rabari/fakePE-user-app)

Features:
- üì± Mobile-first UPI interface
- üì∏ QR code scanner
- üí∞ Digital wallet
- üìä Transaction history
- üîí PIN-protected payments

### FakePE SDK (Separate Repository)
Official **Node.js SDK** for easy integration.

üîó **Repository:** [github.com/Mihir-Rabari/fakePE-sdk](https://github.com/Mihir-Rabari/fakePE-sdk)

Features:
- üì¶ Razorpay-inspired API
- üîê Automatic authentication
- üéØ Idempotency support
- üîî Webhook verification helpers

---

## ‚ö†Ô∏è Important Disclaimer

**FakePE is a MOCK payment system for TESTING and DEVELOPMENT only.**

- üí∞ All money is FAKE
- üß™ Perfect for development & testing
- üö´ NOT suitable for production
- üìö Educational purposes only
- üéì Learn payment gateway architecture

**For real payments, use established providers:**
- [Razorpay](https://razorpay.com)
- [Stripe](https://stripe.com)
- [PayPal](https://paypal.com)
- [Square](https://square.com)

---

## ü§ù Contributing

We love contributions! Whether it's bug fixes, new features, or documentation improvements.

```bash
1. Fork the repository
2. Create a feature branch: git checkout -b feature/amazing
3. Make your changes
4. Commit: git commit -m 'Add amazing feature'
5. Push: git push origin feature/amazing
6. Open a Pull Request
```

### Development Guidelines
- Follow existing code style
- Add tests for new features
- Update documentation
- Test in both light and dark mode
- Keep the green theme consistent! üíö

---

## üìû Support & Community

- üêõ **Bug reports:** [GitHub Issues](https://github.com/Mihir-Rabari/fake-pe/issues)
- üí° **Feature requests:** [GitHub Discussions](https://github.com/Mihir-Rabari/fake-pe/discussions)
- ‚≠ê **Like the project?** Give us a star!
- üîó **Follow:** [@MihirRabari](https://github.com/Mihir-Rabari)

---

## üìÑ License

MIT License - Free to use, modify, and distribute!

See [LICENSE](LICENSE) file for details.

---

## üë®‚Äçüíª Author

**Mihir Rabari**

Built with üíö for the developer community

---

<div align="center">

### ‚≠ê Star us on GitHub!

**If FakePE helped you test payments, give it a star to show support!**

[‚òÖ Star this repo](https://github.com/Mihir-Rabari/fake-pe) ‚Ä¢ [Report Bug](https://github.com/Mihir-Rabari/fake-pe/issues) ‚Ä¢ [Request Feature](https://github.com/Mihir-Rabari/fake-pe/discussions)

Made with üíö by developers, for developers

</div>
